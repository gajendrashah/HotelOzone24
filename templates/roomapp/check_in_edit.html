{% extends 'base.html' %}
{% block content %}
<form method="POST" enctype="multipart/form-data" action="">
    {% csrf_token %}
<h1>Customer details</h1>
{{customer_form}}
<h1>Boking______________________</h1>
{{book_form}}

<button type="submit"> save data </button>
</form>


{% block scripts %}
<script>
    $(document).ready(function(){
    
    
    var room_id = $("#id_room");
    room_id.select2({
      placeholder: 'Select Room id'
    })
    
    $("#id_payment_type").select2({
      placeholder: 'Choose Payment Type'
    })
    
    var gc_room = $("#gc-room")
    gc_room.select2({
      placeholder: 'Select room Group',
      ajax: {
        url: "{% url 'get_room_by_group' %}",
        dataType: 'json',
        processResults:function(data){
          console.log(data)
          return{
            results:$.map(data,function(item){
              return {id:item.id,text:item.title}
            })
          }
        },
        
    
      }
    })
    gc_room.on("select2:select",function(e){
      var data = e.params.data;
      console.log(data)
      $.ajax({
        url:"{% url 'checkin' %}",
        dataType:"json",
        data:{"room":data.text},
        success:function(resp){
         
         
    
          room_id.select2({
            // allowClear: true,
            data:$.map(resp,function(item){
              // console.log(item)
             return {id:item.id,text:item.room_number}
            })
          })
        }
        
      })
      
    })
    });
    </script>


{% endblock scripts %}
{% endblock content %}